<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <title>Library Project</title>
</head>

<body>
    <header>
        <h1>My Library</h1>
    </header>
    <main>
        <div class="desc">This Library project designed by The Odin Project gives me the opportunity to apply my
            understanding of Javascript objects, local storage, and basic HTML/CSS.</div>
        <form action="" class="book-input">
            <div class="input-group">
                <div class="submit-group">
                    <label class="submit-label" for="submit-book">Book</label>
                    <input class="submit-inputs" type="text" name="book" id="submit-book" required>
                </div>
                <div class="submit-group">
                    <label class="submit-label" for="submit-author">Author</label>
                    <input class="submit-inputs" type="text" name="author" id="submit-author" required>
                </div>
                <div class="submit-group pages">
                    <label class="submit-label" for="submit-pages">Pages</label>
                    <input class="submit-inputs" type="text" name="pages" id="submit-pages" required>
                </div>
                <div class="submit-group option-group">
                    <label class="submit-label" for="submit-read">Status</label>
                    <select class ="submit-inputs" name="read" id="submit-read">
                        <option value="read">Read</option>
                        <option value="unread">Not Read</option>
                    </select>
                </div>
            </div>
            <button class="submit-btn" type="submit">submit</button>
        </form>
        <div class="books">
            <div class="book-entry">
                <div class="item-col header">Title</div>
                <div class="item-col header">Author</div>
                <div class="item-col header">Pages</div>
                <div class="item-col header">Status</div>
                <div class="item-col header"> </div>
            </div>
        </div>
    </main>
    <footer>&copy; <span id="copyright-year"></span>, barydos</footer>
</body>

<script>
    // Footer
    let footer = document.querySelector('#copyright-year');
    footer.innerHTML = new Date().getFullYear();

    // MAKE SURE TO READ THE INSTRUCTIONS
    // BONUS AT THE END: change form to a modal from a button

    document.querySelector('.book-input').addEventListener('submit', submitBook);

    function submitBook(e) {
        e.preventDefault();
        let form = document.querySelector('form.book-input');

        let bookInput = document.querySelector('#submit-book').value;
        let authorInput = document.querySelector('#submit-author').value;
        let pagesInput = document.querySelector('#submit-pages').value;
        let statusInput = document.querySelector('#submit-read').value;

        let inputs = document.querySelectorAll('.submit-inputs');
        let valueArr = Array.from(inputs).map(item => item.value);
        let status = valueArr.slice(-1)[0];
        valueArr = valueArr.slice(0,3);

        let bookList = document.querySelector('.books');
        let newBook = document.createElement('div');
        newBook.classList.add('book-entry');
        bookList.appendChild(newBook);
        for (let val of valueArr) {
            let newVal = document.createElement('div');
            newVal.innerText = val;
            newVal.classList.add('item-col');

            newBook.appendChild(newVal);
        }

        let statusItem = document.createElement('button');
        statusItem.classList.add('item-col');
        statusItem.innerText = status;
        newBook.appendChild(statusItem);

        let deleteItem = document.createElement('button');

        deleteItem.addEventListener('click', deleteEntry);
        deleteItem.classList.add('del');
        deleteItem.innerText = 'Delete';
        newBook.appendChild(deleteItem);
        // form.reset();

    }

    function deleteEntry(e) {
        if (confirm('Delete entry?')) {
            e.target.parentElement.remove();
        }
    }

    function setAttributes(elem, options) {
        for (let attr of Object.keys(options)) {
            elem.setAttribute(attr, options[attr]);
        }
    }
</script>
</html>